[logging]
save_dir="checkpoints/consistency_base-192x3"
allow_overwrite=false
plot_epochs=50
save_epochs=25
temp_save_epochs=1
seed=74

[training]
train_batch_size=8
gradient_accumulation_steps=4
mixed_precision=fp16
epochs=6500
epoch_steps=1024
seed=74
P_mean=-1.6
P_std=1.6
warmup_steps=1
gradient_clip_val=0.1
sigma_data=0.5
scale_sigma=false
use_logvar=false
loss_groups=[1, 1, 1, 1, 1, 5]

[model]
main_path="checkpoints/diffusion_base-192x3/latest_checkpoint/saved_model"
#guide_path="checkpoints/diffusion_base-128x3/latest_checkpoint/saved_model"
#guidance_scale=1.9

[optimizer]
type=adam
kwargs={"betas": [0.9, 0.99]}

[lr_sched]
@lr_sched=sqrt
lr=0.00005
ref_nimg=1310720
warmup_nimg=65536

[ema]
sigma_rels=[0.05, 0.1]
update_every=1
checkpoint_every_num_steps=1024

[wandb]
project="generative_land"
tags=["64x64", "consistency"]
mode=online
save_code=true

[train_dataset]
@dataset=h5_latents
h5_file="data/dataset.h5"
crop_size=64
pct_land_ranges=[[0, 0.01], [0.01, 1]]
subset_resolutions=[90, 90]
subset_weights=[0.01, 1]
latents_mean=[0, 0, 0, 0]
latents_std=[1, 1, 1, 1]
sigma_data=0.5
beauty_dist=[[1, 0, 0, 0, 0], [1, 1, 1, 1, 1]]
split="train"

[val_dataset]
@dataset=h5_latents
h5_file="data/dataset.h5"
crop_size=64
pct_land_ranges=[[0, 0.01], [0.01, 1]]
subset_resolutions=[90, 90]
subset_weights=[0.01, 1]
latents_mean=[0, 0, 0, 0]
latents_std=[1, 1, 1, 1]
sigma_data=0.5
beauty_dist=[[1, 0, 0, 0, 0], [1, 1, 1, 1, 1]]
split="val"

[dataloader_kwargs]
num_workers=15
persistent_workers=true
pin_memory=true
pin_memory_device=cuda
prefetch_factor=2

[scheduler]
@scheduler=edm_dpm
sigma_min=0.002
sigma_max=80
sigma_data=0.5